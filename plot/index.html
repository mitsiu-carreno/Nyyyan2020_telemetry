
<!DOCTYPE html>
<html>
  <head>
    <title>Nyyyyan</title>

    <script src="/socket.io/socket.io.js"></script>
    <script src="canvasjs/canvasjs.min.js"></script>
    <script>

      var socket = io();

      window.onload = function(){
        var dataPoints = [];

        var chart = new CanvasJS.Chart("chartContainer",{
          theme: "light2",
          title: {
            text: "Acelerador"
          },
          data: [{
            type: "line",
            dataPoints: dataPoints
          }]
        });

        chart.render();

        // Socket
        socket.on('chat message', function(msg) {
          if(msg.length > 0){
            console.log(msg);
            let test = msg.split(",");
            if(Number(test[0])){
              console.log("ploting ", Number(test[5]));
              console.log(test);
              dataPoints.push({x: Number(test[1]), y:Number(test[5])})
              chart.render();
            }
          }
        });
      }
    </script>
  </head>
  <body>
    <div id="chartContainer" style="height: 200px; width: 100%;"></div>
  </body>
</html>

